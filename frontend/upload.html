<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Resume - Resumify</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700;800;900&family=Montserrat:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    
    <!-- Navigation and page styles -->
    <link rel="stylesheet" href="styles/navigation.css">
    <link rel="stylesheet" href="styles/upload.css">
    <link rel="stylesheet" href="styles/animations.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'cream': '#FFF2C6',
                        'yellow': '#FFD646',
                        'mint': '#00D7AB',
                        'purple-light': '#DAA5FF',
                        'purple-dark': '#6628AD',
                        'blue': '#4EC4FE',
                        'red': '#F24E32',
                        'dark': '#191919'
                    },
                    fontFamily: {
                        'sora': ['Sora', 'sans-serif'],
                        'montserrat': ['Montserrat', 'sans-serif']
                    }
                }
            }
        }
    </script>
    
    <style>
        body { 
            font-family: 'Montserrat', sans-serif;
        }
        .heading-font {
            font-family: 'Sora', sans-serif;
        }
        .font-montserrat {
            font-family: 'Montserrat', sans-serif;
        }
        
        /* Navigation active state */
        .nav-link {
            position: relative;
        }
        
        .nav-link.active {
            color: rgb(255, 242, 198) !important; /* cream */
        }
        
        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, rgb(78, 196, 254), rgb(0, 215, 171)); /* blue, mint */
            border-radius: 1px;
        }
        
        .glow-text {
            text-shadow: 0 0 20px rgba(78, 196, 254, 0.5); /* blue with opacity */
        }
        .glow-box {
            box-shadow: 0 0 30px rgba(78, 196, 254, 0.3); /* blue with opacity */
        }
        .gradient-border {
            background: linear-gradient(45deg, rgb(78, 196, 254), rgb(218, 165, 255), rgb(0, 215, 171)); /* blue, purple-light, mint */
            padding: 2px;
            border-radius: 16px;
        }
        .gradient-border-inner {
            background: rgb(25, 25, 25); /* dark */
            border-radius: 14px;
        }
        
        /* Logo link styles */
        .logo-link {
            text-decoration: none;
            display: block;
            transition: all 0.3s ease;
        }
        
        .logo-link:hover {
            transform: scale(1.05);
        }
        
        .logo-link:hover h1 {
            text-shadow: 0 0 20px rgba(78, 196, 254, 0.3);
        }
    </style>
</head>
<body class="bg-dark text-cream">
    <!-- Animated Background -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
        <div class="absolute top-20 left-10 w-72 h-72 bg-blue/20 rounded-full blur-3xl animate-pulse"></div>
        <div class="absolute top-40 right-20 w-96 h-96 bg-purple-light/20 rounded-full blur-3xl animate-pulse" style="animation-delay: 1s;"></div>
        <div class="absolute bottom-20 left-1/3 w-80 h-80 bg-mint/20 rounded-full blur-3xl animate-pulse" style="animation-delay: 2s;"></div>
    </div>

    <!-- Navigation -->
    <nav>
        <div class="max-w-7xl mx-auto px-6">
            <div class="nav-content">
                <div class="flex items-center">
                    <a href="/" class="logo-link" aria-label="Resumify Home">
                        <div>
                            <h1 class="text-3xl font-bold bg-gradient-to-r from-blue via-purple-light to-mint bg-clip-text text-transparent heading-font">
                                Resumify
                            </h1>
                            <p class="text-sm text-purple-light/70 font-montserrat">AI-Powered Matching</p>
                        </div>
                    </a>
                </div>
                
                <!-- Desktop Navigation -->
                <div class="desktop-nav">
                    <a href="/" class="nav-link">Home</a>
                    <a href="/upload.html" class="nav-link">Upload</a>
                    <a href="/analysis.html" class="nav-link">Analysis</a>
                    <a href="/candidates.html" class="nav-link">Candidates</a>
                    <a href="/jobs.html" class="nav-link">Jobs</a>
                    <a href="/matches.html" class="nav-link">Matches</a>
                </div>

                <!-- Mobile Menu Button -->
                <button id="mobileMenuBtn" class="mobile-menu-btn" aria-label="Toggle mobile menu" aria-expanded="false">
                    <i data-lucide="menu" class="w-6 h-6"></i>
                </button>
            </div>

            <!-- Mobile Navigation Menu -->
            <div id="mobileMenu" class="mobile-nav hidden">
                <div class="mobile-nav-links">
                    <a href="/" class="nav-link">Home</a>
                    <a href="/upload.html" class="nav-link">Upload</a>
                    <a href="/analysis.html" class="nav-link">Analysis</a>
                    <a href="/candidates.html" class="nav-link">Candidates</a>
                    <a href="/jobs.html" class="nav-link">Jobs</a>
                    <a href="/matches.html" class="nav-link">Matches</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="relative z-10 min-h-screen bg-gradient-to-br from-dark via-purple-dark/20 to-dark pt-32 pb-20">
        <div class="max-w-4xl mx-auto px-6">
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold mb-4 heading-font">Upload Resume</h1>
            <p class="text-cream/80 text-lg font-montserrat">Upload a resume to analyze skills, experience, and find job matches</p>
        </div>

        <!-- Upload Form -->
        <div class="gradient-border">
            <div class="gradient-border-inner p-8">
                <form id="uploadForm" class="space-y-6">
                    <!-- Candidate Information -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="candidateName" class="block text-sm font-medium text-cream mb-2 font-montserrat">Full Name *</label>
                            <div class="gradient-border">
                                <div class="gradient-border-inner">
                                    <input type="text" id="candidateName" name="name" required
                                           class="w-full px-4 py-3 bg-transparent text-cream placeholder-cream/50 focus:outline-none transition-all font-montserrat"
                                           placeholder="Enter candidate's full name">
                                </div>
                            </div>
                        </div>
                        <div>
                            <label for="candidateEmail" class="block text-sm font-medium text-cream mb-2 font-montserrat">Email Address *</label>
                            <div class="gradient-border">
                                <div class="gradient-border-inner">
                                    <input type="email" id="candidateEmail" name="email" required
                                           class="w-full px-4 py-3 bg-transparent text-cream placeholder-cream/50 focus:outline-none transition-all font-montserrat"
                                           placeholder="Enter email address">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- File Upload Area -->
                    <div class="space-y-4">
                        <label class="block text-sm font-medium text-cream font-montserrat">Resume File *</label>
                        <div class="gradient-border">
                            <div class="gradient-border-inner">
                                <div id="fileUploadArea" class="p-8 text-center hover:bg-blue/5 transition-colors cursor-pointer rounded-xl">
                                    <div class="upload-icon">
                                        <div class="w-16 h-16 bg-gradient-to-r from-mint to-yellow rounded-full flex items-center justify-center mx-auto mb-4 hover:scale-110 transition-transform duration-300">
                                            <i data-lucide="upload" class="w-8 h-8 text-dark"></i>
                                        </div>
                                        <h3 class="text-lg font-semibold text-cream mb-2 heading-font">Drop your resume here</h3>
                                        <p class="text-cream/70 mb-4 font-montserrat">or <span class="upload-link text-mint hover:text-yellow cursor-pointer transition-colors">browse files</span></p>
                                        <p class="text-sm text-cream/50 font-montserrat">Supports PDF, DOCX, DOC, and TXT files (max 10MB)</p>
                                    </div>
                                    <div id="fileInfo" style="display: none;"></div>
                                </div>
                            </div>
                        </div>
                        <input type="file" id="resumeFile" name="file" accept=".pdf,.docx,.doc,.txt" class="hidden">
                    </div>

                    <!-- Submit Button -->
                    <div class="text-center">
                        <button type="submit" class="group relative px-8 py-4 bg-gradient-to-r from-blue to-mint rounded-xl font-semibold text-dark transition-all duration-300 hover:scale-105 glow-box font-montserrat">
                            <span class="relative z-10">Upload & Analyze Resume</span>
                            <div class="absolute inset-0 bg-gradient-to-r from-mint via-yellow to-blue rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        </button>
                    </div>
                </form>
            </div>
        </div>

            <!-- Upload Status -->
            <div id="uploadStatus" class="hidden text-center py-8">
                <div class="loading-spinner mb-4">
                    <div class="w-16 h-16 border-4 border-cream/20 border-t-blue rounded-full animate-spin mx-auto glow-box"></div>
                </div>
                <h3 id="statusTitle" class="text-xl font-semibold text-cream mb-2 heading-font">Uploading...</h3>
                <p id="statusMessage" class="text-cream/70 mb-4">Preparing file for upload</p>
                <div class="gradient-border mb-4">
                    <div class="gradient-border-inner p-1">
                        <div class="w-full bg-dark rounded-full h-2 progress-container">
                            <div id="progressFill" class="bg-gradient-to-r from-mint to-yellow h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
                <div class="text-center">
                    <span id="progressText" class="text-cream font-semibold text-lg">0%</span>
                    <span id="progressPercentage" class="text-cream/70 text-sm ml-2">Processing...</span>
                </div>
                
                <!-- File processing status -->
                <div class="mt-4 p-4 bg-dark/50 rounded-lg border border-cream/20">
                    <div class="flex items-center justify-center space-x-3">
                        <div class="w-3 h-3 bg-mint rounded-full animate-pulse"></div>
                        <span id="fileStatus" class="text-cream/80 text-sm">Analyzing your resume...</span>
                    </div>
                    <div class="mt-2 text-center">
                        <span id="fileDetails" class="text-cream/60 text-xs">Extracting text and identifying key information</span>
                    </div>
                </div>
            </div>

            <!-- Upload Results -->
            <div id="uploadResults" class="hidden text-center py-8">
                <div class="w-16 h-16 bg-gradient-to-r from-mint to-yellow rounded-full flex items-center justify-center mx-auto mb-4 hover:scale-110 transition-transform duration-300 glow-box">
                    <i data-lucide="check" class="w-8 h-8 text-dark"></i>
                </div>
                <h3 class="text-xl font-semibold text-cream mb-2 heading-font">Upload Successful!</h3>
                <div class="gradient-border mb-6">
                    <div class="gradient-border-inner p-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                            <div>
                                <span class="text-cream/70 font-montserrat">Candidate ID:</span>
                                <span id="resultCandidateId" class="text-cream font-mono ml-2">-</span>
                            </div>
                            <div>
                                <span class="text-cream/70 font-montserrat">Status:</span>
                                <span id="resultStatus" class="text-mint ml-2">-</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <button onclick="viewExtractedText()" class="group relative px-6 py-3 bg-transparent border-2 border-purple-light/50 text-purple-light rounded-xl font-semibold transition-all duration-300 hover:scale-105 hover:bg-purple-light/10 font-montserrat">
                        <span class="relative z-10">View Extracted Text</span>
                    </button>
                    <button onclick="continueToAnalysis()" class="group relative px-6 py-3 bg-gradient-to-r from-mint to-yellow text-dark font-semibold rounded-xl transition-all duration-300 hover:scale-105 glow-box font-montserrat">
                        <span class="relative z-10">Continue to Analysis</span>
                        <div class="absolute inset-0 bg-gradient-to-r from-yellow via-blue to-mint rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                    </button>
                </div>
            </div>
        </div>
        </div>
    </main>

    <!-- Scripts -->
    <script src="config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/navigation.js"></script>
    <script src="js/error-notifications.js"></script>
    <script src="js/realtime-text-extraction.js"></script>
    <script src="js/upload.js"></script>
    <script>
        // Initialize upload manager after DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            try {
                const uploadManager = new UploadManager();
                window.uploadManager = uploadManager; // Make it globally accessible
                
                // Initialize Lucide icons
                if (typeof lucide !== 'undefined') {
                    lucide.createIcons();
                }
                
                // Mobile menu functionality is now handled by navigation.js
            } catch (error) {
                console.error('Failed to initialize upload manager:', error);
            }
        });
    </script>
</body>
</html>